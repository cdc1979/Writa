@using Writa.Models;
@using System.IO;
@using Newtonsoft.Json;
@using Newtonsoft.Json.Converters;
@model Writa.Models.Settings.AllSettings
@{
    
    ViewBag.Title = "Register";
    Layout = "~/Views/Admin/_AdminLayout.cshtml";
}
@section PageJavaScript
{
    <link href="~/Content/toastr.min.css" rel="stylesheet" />
    <link href="~/Content/bootstrap-select.min.css" rel="stylesheet" />
    <script src="~/Scripts/toastr.min.js"></script>
    <script src="~/Scripts/bootstrap-select.min.js"></script>
    <script src="~/Scripts/writa-admin-settings.js"></script>
}
<div class="container">
<form class="form-horizontal" id="settingsform" role="form">
  <div class="form-group">
    <label for="BlogTitle" class="col-sm-2 control-label">Blog Title</label>
    <div class="col-sm-10">
      <input type="text" class="form-control required" id="BlogTitle" name="BlogTitle" placeholder="Blog Title" value="@Model.writaSettings.BlogTitle" />
    </div>
  </div>
  <div class="form-group">
    <label for="BlogSummary" class="col-sm-2 control-label">Blog Summary</label>
    <div class="col-sm-10">
      <input type="text" class="form-control required" id="BlogSummary" name="BlogSummary" placeholder="Blog Summary" value="@Model.writaSettings.BlogSummary" />
    </div>
  </div>
  <div class="form-group">
    <label for="BlogTheme" class="col-sm-2 control-label">Blog Theme</label>
    <div class="col-sm-10">
      <select class="form-control selectpicker" id="BlogTheme" name="BlogTheme">
          @foreach (string d in Directory.GetDirectories(Server.MapPath("~/Themes"))) {
              var f = new DirectoryInfo(d);
              if (f.Name == Model.writaSettings.BlogTheme)
              {
                  <option selected="selected">@f.Name</option>   
              }
              else {
           <option>@f.Name</option>   
          }
          }
      </select>
      
    </div>
  </div>

  <div class="form-group">
    <label for="BlogDefaultEmail" class="col-sm-2 control-label" data-toggle="tooltip" title="Any emails generated by the blog engine are sent from this address">Blog Default Email</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="BlogDefaultEmail" name="BlogDefaultEmail" placeholder="Blog Default Email" value="@Model.writaSettings.BlogDefaultEmail" />
    </div>
  </div>

  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
        <input type="hidden" name="SettingsId" value="@Model.writaSettings.SettingsId" />
      <button type="submit" class="btn btn-success" id="savesettingsbutton">Save Settings</button>
    </div>
  </div>
</form>
<div class="well">
<h4>Global Settings</h4>
    <p>Global settings are loaded from the file system from <b>App_Data/WritaSettings.json</b></p>
    @Html.Raw(JsonConvert.SerializeObject(Model.globalSettings, Formatting.Indented).Replace("\n","<br/>"))
</div>
</div>